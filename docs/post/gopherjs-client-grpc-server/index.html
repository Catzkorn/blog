<!DOCTYPE html>
<html lang="en">
<head>

  
  <meta charset="utf-8">
  <title>GopherJS Client and gRPC Server</title>
  <meta name="description" content="GopherJS Client and gRPC Server">
  <meta name="author" content="Johan Brandhorst">

  
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://jbrandhorst.com/css/fonts.css">
  
  
  <link rel="stylesheet" href="https://unpkg.com/purecss@0.6.1/build/pure-min.css" integrity="sha384-CCTZv2q9I9m3UOxRLaJneXrrqKwUNOzZ6NGEUMwHtShDJ+nCoiXJCAgi05KfkLGY" crossorigin="anonymous">
  
  
    <link rel="stylesheet" href="https://unpkg.com/purecss@0.6.1/build/grids-responsive-min.css">
  
  <link rel="stylesheet" href="https://jbrandhorst.com/css/custom.css">

  
  
  <link rel="stylesheet" href="https://jbrandhorst.com/highlight/styles/default.css">
  
  <script src="https://jbrandhorst.com/highlight/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <meta name="generator" content="Hugo 0.20-DEV" />
  
</head>
<body>

<div class="header pure-g">
    <div class="pure-u-1-24 pure-u-md-5-24"></div>
    <div class="pure-u-11-12 pure-u-md-5-8">
        <div class="desktop pure-menu pure-menu-horizontal nav-menu">
            
            <a href="https://jbrandhorst.com/" class="site-title pure-menu-heading">My Blog</a>
            <ul class="pure-menu-list">
				
                
                <li class="pure-menu-item">
                    <a href="https://jbrandhorst.com/categories/programming" class="pure-menu-link">Programming</a>
                </li>
                
				
                <li class="pure-menu-item">
                    <a href="https://jbrandhorst.com/about/" class="pure-menu-link">About</a>
                </li>
            </ul>
        </div>
        <div class="mobile pure-menu nav-menu">
            <a href="https://jbrandhorst.com/" class="pure-menu-heading" id="toggle-home">My Blog</a>
            <a href="#" id="toggle-btn">&#9776;</a>
            <ul class="pure-menu-list" id="toggle-content" style="display:none;">
                
				
                
                <li class="pure-menu-item">
                    <a href="https://jbrandhorst.com/categories/programming" class="pure-menu-link">Programming</a>
                </li>
                
				
                <li class="pure-menu-item">
                    <a href="https://jbrandhorst.com/about" class="pure-menu-link">About</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="pure-u-1-24 pure-u-md-1-6"></div>
</div>

<div class="pure-g">
    <div class="pure-u-1-24 pure-u-md-5-24"></div>
	<div class="pure-u-11-12 pure-u-md-5-8">
        <div class="post">

            <div class="post-title">
                <p class="footnote">
                    <time class="">2017-04-17</time>
		            
                    
                    |
                    
                    
                    tags:<a href="https://jbrandhorst.com/tags/grpc">gRPC</a> <a href="https://jbrandhorst.com/tags/protobuf">protobuf</a> <a href="https://jbrandhorst.com/tags/golang">golang</a> <a href="https://jbrandhorst.com/tags/gopherjs">gopherjs</a> <a href="https://jbrandhorst.com/tags/grpc-gateway">grpc-gateway</a> 
                    

                    
                    categories:<a href="https://jbrandhorst.com/categories/programming">Programming</a> 
                    

                    
                </p>
                <h1>GopherJS Client and gRPC Server</h1>
            </div>

            <div class="post-content">
                

<p>I&rsquo;ve been using <a href="http://www.grpc.io/">gRPC</a> and <a href="https://golang.org/">Go</a> a lot in the last year.
At <a href="https://www.cognitivelogic.com">Cognitive Logic</a> every one of our backend services is
implemented with Go and gRPC, and it enables us to abstract away most of the complexities
of networked micro services and keep interfaces typed and well defined using
<a href="https://developers.google.com/protocol-buffers/">Google protobuffers</a>.</p>

<p>I really enjoy using both, but sometimes I need to write a frontend to a
web server and I despise writing Javascript. So what do? Use Go of course!</p>

<p>With <a href="https://github.com/gopherjs/gopherjs">GopherJS</a> it&rsquo;s possible to write safe
statically typed code that transpiles to Javascript. It comes with a couple of
quirks but as long as I don&rsquo;t have to use Javascript I&rsquo;m happy.</p>

<p>Naturally, I want to be able to use Go and gRPC in the backend as well if I can,
and with the use of the <a href="https://github.com/grpc-ecosystem/grpc-gateway">gRPC HTTP Gateway</a>
it becomes as simple as writing a normal gRPC service.</p>

<p>So what are the steps required to get a GopherJS frontend client talking to a gRPC backend
seamlessly? In short:</p>

<ul>
<li><a href="https://jbrandhorst.com/post/gopherjs-client-grpc-server-1/">Create the protobuf interface</a></li>
<li><a href="https://jbrandhorst.com/post/gopherjs-client-grpc-server-2/">Implement the server</a></li>
<li><a href="https://jbrandhorst.com/post/gopherjs-client-grpc-server-3/">Implement the client</a></li>
<li><a href="https://jbrandhorst.com/post/gopherjs-client-grpc-server-4/">Putting it all together</a></li>
</ul>

<p>If you want to skip ahead, the finished example can be found on
<a href="https://github.com/johanbrandhorst/gopherjs-grpc-websocket">my github</a>.</p>

<h2 id="preparation">Preparation</h2>

<p>Some structure will help organization. Let&rsquo;s create a <code>client</code>, <code>server</code>, and <code>protos</code> folder:</p>

<pre><code class="language-bash">$ tree -L 1 -d
.
|-- client
|-- protos
`-- server
</code></pre>

<p>Next up we&rsquo;ll create the proto interface.</p>

<p><a href="https://jbrandhorst.com/post/gopherjs-client-grpc-server-1/">Part 1</a></p>

            </div>
        </div>
	</div>
    <div class="pure-u-1-24 pure-u-md-1-6"></div>
</div>

<div class="footer pure-g">
    <div class="pure-u-1-24 pure-u-md-5-24"></div>
    <div class="pure-u-11-12 pure-u-md-5-8">
        <div class="footer-content">
		  <div class="pure-menu pure-menu-horizontal">
              <ul>
			      
                  <li class="pure-menu-heading" id="foot-name">Johan Brandhorst:</li>
                  
				  
                  
          
                  
                  <li class="pure-menu-item">
                      <a href="https://github.com/johanbrandhorst" class="pure-menu-link">GitHub</a>
                  </li>
                  
          
                  
                  <li class="pure-menu-item">
                      <a href="https://www.linkedin.com/in/johan-brandhorst-satzkorn-aa318220" class="pure-menu-link">LinkedIn</a>
                  </li>
                  
          
                  
                  <li class="pure-menu-item">
                      <a href="https://www.facebook.com/johan.brandhorst" class="pure-menu-link">Facebook</a>
                  </li>
                  
          
                  
                  <li class="pure-menu-item">
                      <a href="https://twitter.com/JohanBrandhorst" class="pure-menu-link">Twitter</a>
                  </li>
                  
          
              </ul>
              <a href="#" class="pure-menu-heading pull-right" id="gototop-btn">↑↑</a>
          </div>
		  
		  <p id="foot-copyright">Copyright (c) 2017, Johan Brandhorst; all rights reserved. Thanks to Netlify.com for hosting my blog!</p>
		  
		</div>
	  </div>
      <div class="pure-u-1-24 pure-u-md-1-6"></div>
</div>


<script src="https://jbrandhorst.com/js/jquery.min.js" type="text/javascript"></script>
<script src="https://jbrandhorst.com/js/jquery.timeago.js" type="text/javascript"></script>
<script type="text/javascript">
  $(function(){
    $("time.timeago").timeago();
  })
  $("#toggle-btn").click(function(){
    $("#toggle-content").toggle();
    if($(this).html() === "☰") {
        $(this).html("X")
    } else {
        $(this).html("☰")
    }
  });
  $(window).resize(function(){
    if(window.innerWidth > 768) {
      $(".desktop").removeAttr("style");
    }
  });
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-96154465-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>

